{
  "$schema": "https://json-schema.org/draft-07/schema",
  "$id": "compose_spec.json",
  "type": "object",
  "title": "Compose Specification",
  "description": "Compose 文件是一个 YAML 文件，用于定义一个基于多容器的应用程序。",
  "properties": {
    "version": {
      "type": "string",
      "deprecated": true,
      "description": "声明是为了向后兼容，但会被忽略。请删除它。"
    },
    "name": {
      "type": "string",
      "description": "定义 Compose 项目名称，除非用户显式定义一个。"
    },
    "include": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/include"
      },
      "description": "要包含的 Compose 子项目。"
    },
    "services": {
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z0-9._-]+$": {
          "$ref": "#/definitions/service"
        }
      },
      "additionalProperties": false,
      "description": "应用程序将使用的服务。"
    },
    "models": {
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z0-9._-]+$": {
          "$ref": "#/definitions/model"
        }
      },
      "description": "应用程序将使用的语言模型。"
    },
    "networks": {
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z0-9._-]+$": {
          "$ref": "#/definitions/network"
        }
      },
      "description": "多个服务共享的网络。"
    },
    "volumes": {
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z0-9._-]+$": {
          "$ref": "#/definitions/volume"
        }
      },
      "additionalProperties": false,
      "description": "多个服务共享的命名卷。"
    },
    "secrets": {
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z0-9._-]+$": {
          "$ref": "#/definitions/secret"
        }
      },
      "additionalProperties": false,
      "description": "多个服务共享的密钥。"
    },
    "configs": {
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z0-9._-]+$": {
          "$ref": "#/definitions/config"
        }
      },
      "additionalProperties": false,
      "description": "多个服务共享的配置。"
    }
  },
  "patternProperties": {
    "^x-": {}
  },
  "additionalProperties": false,
  "definitions": {
    "service": {
      "type": "object",
      "description": "服务的配置。",
      "properties": {
        "develop": {
          "$ref": "#/definitions/development"
        },
        "deploy": {
          "$ref": "#/definitions/deployment"
        },
        "annotations": {
          "$ref": "#/definitions/list_or_dict"
        },
        "attach": {
          "type": [
            "boolean",
            "string"
          ]
        },
        "build": {
          "description": "用于构建服务镜像的配置选项。",
          "oneOf": [
            {
              "type": "string",
              "description": "构建上下文的路径。可以是相对路径或 URL。"
            },
            {
              "type": "object",
              "properties": {
                "context": {
                  "type": "string",
                  "description": "构建上下文的路径。可以是相对路径或 URL。"
                },
                "dockerfile": {
                  "type": "string",
                  "description": "用于构建镜像的 Dockerfile 名称。"
                },
                "dockerfile_inline": {
                  "type": "string",
                  "description": "要使用的内联 Dockerfile 内容，而不是构建上下文中的 Dockerfile。"
                },
                "entitlements": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "授予构建过程的额外特权列表。"
                },
                "args": {
                  "$ref": "#/definitions/list_or_dict",
                  "description": "构建时变量，指定为映射或 KEY=VAL 对的列表。"
                },
                "ssh": {
                  "$ref": "#/definitions/list_or_dict",
                  "description": "要暴露给构建的 SSH 代理套接字或密钥。格式为字符串或“default|<id>[=<socket>|<key>[,<key>]]”的列表。"
                },
                "labels": {
                  "$ref": "#/definitions/list_or_dict",
                  "description": "要应用于构建镜像的标签。"
                },
                "cache_from": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "镜像构建器用于缓存解析的源列表。"
                },
                "cache_to": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "构建缓存的缓存目标。"
                },
                "no_cache": {
                  "type": [
                    "boolean",
                    "string"
                  ],
                  "description": "构建镜像时不使用缓存。"
                },
                "additional_contexts": {
                  "$ref": "#/definitions/list_or_dict",
                  "description": "要使用的额外构建上下文，指定为名称到上下文路径或 URL 的映射。"
                },
                "network": {
                  "type": "string",
                  "description": "用于构建的网络模式。选项包括 'default'、'none'、'host' 或网络名称。"
                },
                "provenance": {
                  "type": [
                    "string",
                    "boolean"
                  ],
                  "description": "添加一个出处证明。"
                },
                "sbom": {
                  "type": [
                    "string",
                    "boolean"
                  ],
                  "description": "添加一个 SBOM 证明。"
                },
                "pull": {
                  "type": [
                    "boolean",
                    "string"
                  ],
                  "description": "始终尝试拉取更新版本的镜像。"
                },
                "target": {
                  "type": "string",
                  "description": "多阶段 Dockerfile 中要定位的构建阶段。"
                },
                "shm_size": {
                  "type": [
                    "integer",
                    "string"
                  ],
                  "description": "构建容器的 /dev/shm 大小。字符串值可以使用 '2g' 等后缀表示 2 吉字节。"
                },
                "extra_hosts": {
                  "$ref": "#/definitions/extra_hosts",
                  "description": "为构建容器添加主机名映射。"
                },
                "isolation": {
                  "type": "string",
                  "description": "用于构建过程的容器隔离技术。"
                },
                "privileged": {
                  "type": [
                    "boolean",
                    "string"
                  ],
                  "description": "授予构建容器扩展特权。"
                },
                "secrets": {
                  "$ref": "#/definitions/service_config_or_secret",
                  "description": "要暴露给构建的密钥。这些在构建时可访问。"
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "要应用于构建镜像的额外标签。"
                },
                "ulimits": {
                  "$ref": "#/definitions/ulimits",
                  "description": "覆盖构建容器的默认 ulimits。"
                },
                "platforms": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "要构建的平台，例如 'linux/amd64'、'linux/arm64' 或 'windows/amd64'。"
                }
              },
              "additionalProperties": false,
              "patternProperties": {
                "^x-": {}
              }
            }
          ]
        },
        "blkio_config": {
          "type": "object",
          "description": "服务的块 IO 配置。",
          "properties": {
            "device_read_bps": {
              "type": "array",
              "description": "限制从设备读取的速率（字节/秒）。",
              "items": {
                "$ref": "#/definitions/blkio_limit"
              }
            },
            "device_read_iops": {
              "type": "array",
              "description": "限制从设备读取的速率（IO/秒）。",
              "items": {
                "$ref": "#/definitions/blkio_limit"
              }
            },
            "device_write_bps": {
              "type": "array",
              "description": "限制写入设备的速率（字节/秒）。",
              "items": {
                "$ref": "#/definitions/blkio_limit"
              }
            },
            "device_write_iops": {
              "type": "array",
              "description": "限制写入设备的速率（IO/秒）。",
              "items": {
                "$ref": "#/definitions/blkio_limit"
              }
            },
            "weight": {
              "type": [
                "integer",
                "string"
              ],
              "description": "服务的块 IO 权重（相对权重），介于 10 到 1000 之间。"
            },
            "weight_device": {
              "type": "array",
              "description": "特定设备的块 IO 权重（相对权重）。",
              "items": {
                "$ref": "#/definitions/blkio_weight"
              }
            }
          },
          "additionalProperties": false
        },
        "cap_add": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "description": "添加 Linux 功能。例如，'CAP_SYS_ADMIN'、'SYS_ADMIN' 或 'NET_ADMIN'。"
        },
        "cap_drop": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "description": "删除 Linux 功能。例如，'CAP_SYS_ADMIN'、'SYS_ADMIN' 或 'NET_ADMIN'。"
        },
        "cgroup": {
          "type": "string",
          "enum": [
            "host",
            "private"
          ],
          "description": "指定要加入的 cgroup 命名空间。使用 'host' 使用主机的 cgroup 命名空间，或使用 'private' 使用私有 cgroup 命名空间。"
        },
        "cgroup_parent": {
          "type": "string",
          "description": "为容器指定一个可选的父 cgroup。"
        },
        "command": {
          "$ref": "#/definitions/command",
          "description": "覆盖容器镜像声明的默认命令，例如 Dockerfile 中的 'CMD'。"
        },
        "configs": {
          "$ref": "#/definitions/service_config_or_secret",
          "description": "授予对每个服务的配置的访问权限。"
        },
        "container_name": {
          "type": "string",
          "description": "指定自定义容器名称，而不是生成的默认名称。",
          "pattern": "[a-zA-Z0-9][a-zA-Z0-9_.-]+"
        },
        "cpu_count": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "integer",
              "minimum": 0
            }
          ],
          "description": "可用的 CPU 数量。"
        },
        "cpu_percent": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            }
          ],
          "description": "要使用的 CPU 资源百分比。"
        },
        "cpu_shares": {
          "type": [
            "number",
            "string"
          ],
          "description": "容器的 CPU 份额（相对权重）。"
        },
        "cpu_quota": {
          "type": [
            "number",
            "string"
          ],
          "description": "限制 CPU CFS (Completely Fair Scheduler) 配额。"
        },
        "cpu_period": {
          "type": [
            "number",
            "string"
          ],
          "description": "限制 CPU CFS (Completely Fair Scheduler) 周期。"
        },
        "cpu_rt_period": {
          "type": [
            "number",
            "string"
          ],
          "description": "以微秒或持续时间为单位限制 CPU 实时周期。"
        },
        "cpu_rt_runtime": {
          "type": [
            "number",
            "string"
          ],
          "description": "以微秒或持续时间为单位限制 CPU 实时运行时。"
        },
        "cpus": {
          "type": [
            "number",
            "string"
          ],
          "description": "要使用的 CPU 数量。支持浮点值以请求部分 CPU。"
        },
        "cpuset": {
          "type": "string",
          "description": "允许执行的 CPU（0-3、0,1）。"
        },
        "credential_spec": {
          "type": "object",
          "description": "为托管服务帐户配置凭据规范。",
          "properties": {
            "config": {
              "type": "string",
              "description": "要使用的凭据规范配置的名称。"
            },
            "file": {
              "type": "string",
              "description": "凭据规范文件的路径。"
            },
            "registry": {
              "type": "string",
              "description": "Windows 注册表中凭据规范的路径。"
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        },
        "depends_on": {
          "oneOf": [
            {
              "$ref": "#/definitions/list_of_strings"
            },
            {
              "type": "object",
              "additionalProperties": false,
              "patternProperties": {
                "^[a-zA-Z0-9._-]+$": {
                  "type": "object",
                  "additionalProperties": false,
                  "patternProperties": {
                    "^x-": {}
                  },
                  "properties": {
                    "restart": {
                      "type": [
                        "boolean",
                        "string"
                      ],
                      "description": "当此服务重新启动时，是否重新启动依赖服务。"
                    },
                    "required": {
                      "type": "boolean",
                      "default": true,
                      "description": "依赖项对于启动依赖服务是否是必需的。"
                    },
                    "condition": {
                      "type": "string",
                      "enum": [
                        "service_started",
                        "service_healthy",
                        "service_completed_successfully"
                      ],
                      "description": "要等待的条件。'service_started' 等待服务启动，'service_healthy' 等待服务健康（由其健康检查定义），'service_completed_successfully' 等待服务成功完成。"
                    }
                  },
                  "required": [
                    "condition"
                  ]
                }
              }
            }
          ],
          "description": "表示服务之间的依赖关系。服务依赖关系导致服务按依赖关系顺序启动。依赖服务将在依赖项准备好后才启动。"
        },
        "device_cgroup_rules": {
          "$ref": "#/definitions/list_of_strings",
          "description": "将规则添加到 cgroup 允许的设备列表。"
        },
        "devices": {
          "type": "array",
          "description": "容器的设备映射列表。",
          "items": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "required": [
                  "source"
                ],
                "properties": {
                  "source": {
                    "type": "string",
                    "description": "主机上设备的路径。"
                  },
                  "target": {
                    "type": "string",
                    "description": "设备在容器中将映射到的路径。"
                  },
                  "permissions": {
                    "type": "string",
                    "description": "设备的 cgroup 权限（rwm）。"
                  }
                },
                "additionalProperties": false,
                "patternProperties": {
                  "^x-": {}
                }
              }
            ]
          }
        },
        "dns": {
          "$ref": "#/definitions/string_or_list",
          "description": "为服务容器设置的自定义 DNS 服务器。"
        },
        "dns_opt": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "description": "传递给容器 DNS 解析器的自定义 DNS 选项。"
        },
        "dns_search": {
          "$ref": "#/definitions/string_or_list",
          "description": "为服务容器设置的自定义 DNS 搜索域。"
        },
        "domainname": {
          "type": "string",
          "description": "为服务容器使用的自定义域名。"
        },
        "entrypoint": {
          "$ref": "#/definitions/command",
          "description": "覆盖容器镜像声明的默认入口点，例如 Dockerfile 中的 'ENTRYPOINT'。"
        },
        "env_file": {
          "$ref": "#/definitions/env_file",
          "description": "从一个或多个文件添加环境变量。可以是单个文件路径或文件路径列表。"
        },
        "label_file": {
          "$ref": "#/definitions/label_file",
          "description": "使用包含 Docker 标签的文件向容器添加元数据。"
        },
        "environment": {
          "$ref": "#/definitions/list_or_dict",
          "description": "添加环境变量。可以使用数组或 KEY=VAL 对的列表。"
        },
        "expose": {
          "type": "array",
          "items": {
            "type": [
              "string",
              "number"
            ]
          },
          "uniqueItems": true,
          "description": "公开端口而不将其发布到主机 - 它们仅对链接的服务可访问。"
        },
        "extends": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "object",
              "properties": {
                "service": {
                  "type": "string",
                  "description": "要扩展的服务的名称。"
                },
                "file": {
                  "type": "string",
                  "description": "定义要扩展的服务的文件的路径。"
                }
              },
              "required": [
                "service"
              ],
              "additionalProperties": false
            }
          ],
          "description": "扩展当前文件或另一个文件中的另一个服务。"
        },
        "provider": {
          "type": "object",
          "description": "指定一个不直接由 Compose 管理的服务，并将其管理委托给外部提供程序。",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "description": "Compose 用于管理服务设置和拆卸生命周期的外部组件。"
            },
            "options": {
              "type": "object",
              "description": "提供程序特定的选项。",
              "patternProperties": {
                "^.+$": {
                  "oneOf": [
                    {
                      "type": [
                        "string",
                        "number",
                        "boolean"
                      ]
                    },
                    {
                      "type": "array",
                      "items": {
                        "type": [
                          "string",
                          "number",
                          "boolean"
                        ]
                      }
                    }
                  ]
                }
              }
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        },
        "external_links": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "description": "链接到在此 Compose 应用程序外部启动的服务。将服务指定为 <service_name>:<alias>。"
        },
        "extra_hosts": {
          "$ref": "#/definitions/extra_hosts",
          "description": "向容器网络接口配置添加主机名映射。"
        },
        "gpus": {
          "$ref": "#/definitions/gpus",
          "description": "定义要使用的 GPU 设备。可以设置为 'all' 以使用所有 GPU，或指定特定 GPU 设备的列表。"
        },
        "group_add": {
          "type": "array",
          "items": {
            "type": [
              "string",
              "number"
            ]
          },
          "uniqueItems": true,
          "description": "添加容器内用户应属于的额外组。"
        },
        "healthcheck": {
          "$ref": "#/definitions/healthcheck",
          "description": "配置容器的健康检查以监视其健康状态。"
        },
        "hostname": {
          "type": "string",
          "description": "为服务容器定义自定义主机名。"
        },
        "image": {
          "type": "string",
          "description": "指定用于启动容器的镜像。可以是 repository/tag、摘要或本地镜像 ID。"
        },
        "init": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "在容器内作为 init 进程运行，该进程转发信号并回收进程。"
        },
        "ipc": {
          "type": "string",
          "description": "服务容器的 IPC 共享模式。使用 'host' 共享主机的 IPC 命名空间，'service:[service_name]' 与另一个服务共享，或 'shareable' 允许其他服务共享此服务的 IPC 命名空间。"
        },
        "isolation": {
          "type": "string",
          "description": "要使用的容器隔离技术。支持的值是特定于平台的。"
        },
        "labels": {
          "$ref": "#/definitions/list_or_dict",
          "description": "使用 Docker 标签向容器添加元数据。可以使用数组或列表。"
        },
        "links": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "description": "链接到另一个服务中的容器。可以指定服务名称和链接别名（SERVICE:ALIAS），或仅指定服务名称。"
        },
        "logging": {
          "type": "object",
          "description": "服务的日志配置。",
          "properties": {
            "driver": {
              "type": "string",
              "description": "要使用的日志驱动程序，例如 'json-file'、'syslog'、'journald' 等。"
            },
            "options": {
              "type": "object",
              "description": "日志驱动程序的选项。",
              "patternProperties": {
                "^.+$": {
                  "type": [
                    "string",
                    "number",
                    "null"
                  ]
                }
              }
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        },
        "mac_address": {
          "type": "string",
          "description": "要设置的容器 MAC 地址。"
        },
        "mem_limit": {
          "type": [
            "number",
            "string"
          ],
          "description": "容器的内存限制。字符串值可以使用 '2g' 等后缀表示 2 吉字节。"
        },
        "mem_reservation": {
          "type": [
            "string",
            "integer"
          ],
          "description": "容器的内存预留。"
        },
        "mem_swappiness": {
          "type": [
            "integer",
            "string"
          ],
          "description": "容器内存可交换性百分比（0 到 100）。"
        },
        "memswap_limit": {
          "type": [
            "number",
            "string"
          ],
          "description": "容器允许交换到磁盘的内存量。设置为 -1 以启用无限交换。"
        },
        "network_mode": {
          "type": "string",
          "description": "网络模式。值可以是 'bridge'、'host'、'none'、'service:[service name]' 或 'container:[container name]'。"
        },
        "models": {
          "oneOf": [
            {
              "$ref": "#/definitions/list_of_strings"
            },
            {
              "type": "object",
              "patternProperties": {
                "^[a-zA-Z0-9._-]+$": {
                  "type": "object",
                  "properties": {
                    "endpoint_var": {
                      "type": "string",
                      "description": "环境变量设置为 AI 模型端点。"
                    },
                    "model_var": {
                      "type": "string",
                      "description": "环境变量设置为 AI 模型名称。"
                    }
                  },
                  "additionalProperties": false,
                  "patternProperties": {
                    "^x-": {}
                  }
                }
              }
            }
          ],
          "description": "要使用的 AI 模型，引用顶级 models 键下的条目。"
        },
        "networks": {
          "oneOf": [
            {
              "$ref": "#/definitions/list_of_strings"
            },
            {
              "type": "object",
              "patternProperties": {
                "^[a-zA-Z0-9._-]+$": {
                  "oneOf": [
                    {
                      "type": "object",
                      "properties": {
                        "aliases": {
                          "$ref": "#/definitions/list_of_strings",
                          "description": "此服务在网络上的备用主机名。"
                        },
                        "interface_name": {
                          "type": "string",
                          "description": "用于连接到网络的接口网络名称。"
                        },
                        "ipv4_address": {
                          "type": "string",
                          "description": "为此服务在此网络上指定一个静态 IPv4 地址。"
                        },
                        "ipv6_address": {
                          "type": "string",
                          "description": "为此服务在此网络上指定一个静态 IPv6 地址。"
                        },
                        "link_local_ips": {
                          "$ref": "#/definitions/list_of_strings",
                          "description": "链接本地 IP 的列表。"
                        },
                        "mac_address": {
                          "type": "string",
                          "description": "为此服务在此网络上指定 MAC 地址。"
                        },
                        "driver_opts": {
                          "type": "object",
                          "description": "此网络的驱动程序选项。",
                          "patternProperties": {
                            "^.+$": {
                              "type": [
                                "string",
                                "number"
                              ]
                            }
                          }
                        },
                        "priority": {
                          "type": "number",
                          "description": "指定网络连接的优先级。"
                        },
                        "gw_priority": {
                          "type": "number",
                          "description": "指定网络连接的网关优先级。"
                        }
                      },
                      "additionalProperties": false,
                      "patternProperties": {
                        "^x-": {}
                      }
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              },
              "additionalProperties": false
            }
          ],
          "description": "要加入的网络，引用顶级 networks 键下的条目。可以是网络名称列表或网络名称到网络配置的映射。"
        },
        "oom_kill_disable": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "禁用容器的 OOM Killer。"
        },
        "oom_score_adj": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "integer",
              "minimum": -1000,
              "maximum": 1000
            }
          ],
          "description": "调整主机对容器的 OOM 偏好（接受 -1000 到 1000）。"
        },
        "pid": {
          "type": [
            "string",
            "null"
          ],
          "description": "容器的 PID 模式。"
        },
        "pids_limit": {
          "type": [
            "number",
            "string"
          ],
          "description": "调整容器的 PID 限制。设置为 -1 表示无限 PID。"
        },
        "platform": {
          "type": "string",
          "description": "要运行的目标平台，例如 'linux/amd64'、'linux/arm64' 或 'windows/amd64'。"
        },
        "ports": {
          "type": "array",
          "description": "公开容器端口。短格式（[HOST:]CONTAINER[/PROTOCOL]）。",
          "items": {
            "oneOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              },
              {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "此端口映射的可读名称。"
                  },
                  "mode": {
                    "type": "string",
                    "description": "端口绑定模式，'host' 用于发布主机端口，'ingress' 用于负载均衡。"
                  },
                  "host_ip": {
                    "type": "string",
                    "description": "要绑定的主机 IP。"
                  },
                  "target": {
                    "type": [
                      "integer",
                      "string"
                    ],
                    "description": "容器内的端口。"
                  },
                  "published": {
                    "type": [
                      "string",
                      "integer"
                    ],
                    "description": "公开暴露的端口。"
                  },
                  "protocol": {
                    "type": "string",
                    "description": "端口协议（tcp 或 udp）。"
                  },
                  "app_protocol": {
                    "type": "string",
                    "description": "要与端口一起使用的应用程序协议（例如，http、https、mysql）。"
                  }
                },
                "additionalProperties": false,
                "patternProperties": {
                  "^x-": {}
                }
              }
            ]
          },
          "uniqueItems": true
        },
        "post_start": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/service_hook"
          },
          "description": "容器启动后要运行的命令。如果任何命令失败，容器将停止。"
        },
        "pre_stop": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/service_hook"
          },
          "description": "容器停止前要运行的命令。如果任何命令失败，容器停止将被中止。"
        },
        "privileged": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "授予服务容器扩展特权。"
        },
        "profiles": {
          "$ref": "#/definitions/list_of_strings",
          "description": "此服务的配置文件列表。指定配置文件后，仅当配置文件被激活时，服务才会被启动。"
        },
        "pull_policy": {
          "type": "string",
          "pattern": "always|never|build|if_not_present|missing|refresh|daily|weekly|every_([0-9]+[wdhms])+",
          "description": "拉取镜像的策略。选项包括：'always'、'never'、'if_not_present'、'missing'、'build' 或基于时间的刷新策略。"
        },
        "pull_refresh_after": {
          "type": "string",
          "description": "刷新镜像所需的时间。与 pull_policy=refresh 一起使用。"
        },
        "read_only": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "以只读方式挂载容器的文件系统。"
        },
        "restart": {
          "type": "string",
          "description": "服务容器的重启策略。选项包括：'no'、'always'、'on-failure' 和 'unless-stopped'。"
        },
        "runtime": {
          "type": "string",
          "description": "用于此容器的运行时，例如 'runc'。"
        },
        "scale": {
          "type": [
            "integer",
            "string"
          ],
          "description": "为此服务部署的容器数量。"
        },
        "security_opt": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "description": "覆盖每个容器的默认标签方案。"
        },
        "shm_size": {
          "type": [
            "number",
            "string"
          ],
          "description": "/dev/shm 的大小。字符串值可以使用 '2g' 等后缀表示 2 吉字节。"
        },
        "secrets": {
          "$ref": "#/definitions/service_config_or_secret",
          "description": "授予对每个服务的密钥的访问权限。"
        },
        "sysctls": {
          "$ref": "#/definitions/list_or_dict",
          "description": "要在容器中设置的内核参数。可以使用数组或列表。"
        },
        "stdin_open": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "即使未连接也保持 STDIN 打开。"
        },
        "stop_grace_period": {
          "type": "string",
          "description": "在发送 SIGKILL 之前等待容器优雅停止的时间（例如，'1s'，'1m30s'）。"
        },
        "stop_signal": {
          "type": "string",
          "description": "用于停止容器的信号（例如，'SIGTERM'，'SIGINT'）。"
        },
        "storage_opt": {
          "type": "object",
          "description": "容器的存储驱动程序选项。"
        },
        "tmpfs": {
          "$ref": "#/definitions/string_or_list",
          "description": "将临时文件系统（tmpfs）挂载到容器中。可以是单个值或列表。"
        },
        "tty": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "为服务容器分配一个伪 TTY。"
        },
        "ulimits": {
          "$ref": "#/definitions/ulimits",
          "description": "覆盖容器的默认 ulimits。"
        },
        "use_api_socket": {
          "type": "boolean",
          "description": "绑定挂载 Docker API 套接字和所需的身份验证。"
        },
        "user": {
          "type": "string",
          "description": "用于运行容器进程的用户名或 UID。"
        },
        "uts": {
          "type": "string",
          "description": "要使用的 UTS 命名空间。'host' 共享主机的 UTS 命名空间。"
        },
        "userns_mode": {
          "type": "string",
          "description": "要使用的用户命名空间。'host' 共享主机的用户命名空间。"
        },
        "volumes": {
          "type": "array",
          "description": "挂载主机路径或命名卷，使其可被容器访问。短格式（VOLUME:CONTAINER_PATH[:MODE]）",
          "items": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "bind",
                      "volume",
                      "tmpfs",
                      "cluster",
                      "npipe",
                      "image"
                    ],
                    "description": "挂载类型：'bind' 用于挂载主机目录，'volume' 用于命名卷，'tmpfs' 用于临时文件系统，'cluster' 用于集群卷，'npipe' 用于命名管道，或 'image' 用于从镜像挂载。"
                  },
                  "source": {
                    "type": "string",
                    "description": "挂载的源，'bind' 挂载的主机上的路径，'image' 挂载的 docker 镜像引用，或顶级 volumes 键中定义的卷的名称。不适用于 'tmpfs' 挂载。"
                  },
                  "target": {
                    "type": "string",
                    "description": "卷在容器中挂载到的路径。"
                  },
                  "read_only": {
                    "type": [
                      "boolean",
                      "string"
                    ],
                    "description": "将卷设置为只读的标志。"
                  },
                  "consistency": {
                    "type": "string",
                    "description": "挂载的一致性要求。可用值是特定于平台的。"
                  },
                  "bind": {
                    "type": "object",
                    "description": "特定于绑定挂载的配置。",
                    "properties": {
                      "propagation": {
                        "type": "string",
                        "description": "绑定挂载的传播模式：'shared'、'slave'、'private'、'rshared'、'rslave' 或 'rprivate'。"
                      },
                      "create_host_path": {
                        "type": [
                          "boolean",
                          "string"
                        ],
                        "description": "如果主机路径不存在，则创建它。"
                      },
                      "recursive": {
                        "type": "string",
                        "enum": [
                          "enabled",
                          "disabled",
                          "writable",
                          "readonly"
                        ],
                        "description": "递归挂载源目录。"
                      },
                      "selinux": {
                        "type": "string",
                        "enum": [
                          "z",
                          "Z"
                        ],
                        "description": "SELinux 重新标记选项：'z' 表示共享内容，'Z' 表示私有非共享内容。"
                      }
                    },
                    "additionalProperties": false,
                    "patternProperties": {
                      "^x-": {}
                    }
                  },
                  "volume": {
                    "type": "object",
                    "description": "特定于卷挂载的配置。",
                    "properties": {
                      "labels": {
                        "$ref": "#/definitions/list_or_dict",
                        "description": "要应用于卷的标签。"
                      },
                      "nocopy": {
                        "type": [
                          "boolean",
                          "string"
                        ],
                        "description": "在创建卷时禁用从容器复制数据的标志。"
                      },
                      "subpath": {
                        "type": "string",
                        "description": "要挂载的卷中的子路径，而不是卷根目录。"
                      }
                    },
                    "additionalProperties": false,
                    "patternProperties": {
                      "^x-": {}
                    }
                  },
                  "tmpfs": {
                    "type": "object",
                    "description": "特定于 tmpfs 挂载的配置。",
                    "properties": {
                      "size": {
                        "oneOf": [
                          {
                            "type": "integer",
                            "minimum": 0
                          },
                          {
                            "type": "string"
                          }
                        ],
                        "description": "tmpfs 挂载的大小（以字节为单位）。"
                      },
                      "mode": {
                        "type": [
                          "number",
                          "string"
                        ],
                        "description": "tmpfs 的文件模式（八进制）。"
                      }
                    },
                    "additionalProperties": false,
                    "patternProperties": {
                      "^x-": {}
                    }
                  },
                  "image": {
                    "type": "object",
                    "description": "特定于镜像挂载的配置。",
                    "properties": {
                      "subpath": {
                        "type": "string",
                        "description": "要挂载的镜像中的子路径，而不是镜像根目录。"
                      }
                    },
                    "additionalProperties": false,
                    "patternProperties": {
                      "^x-": {}
                    }
                  }
                },
                "additionalProperties": false,
                "patternProperties": {
                  "^x-": {}
                }
              }
            ]
          },
          "uniqueItems": true
        },
        "volumes_from": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "description": "从另一个服务或容器挂载卷。可选地指定只读访问（ro）或读写（rw）。"
        },
        "working_dir": {
          "type": "string",
          "description": "运行入口点或命令的工作目录。"
        }
      },
      "patternProperties": {
        "^x-": {}
      },
      "additionalProperties": false
    },
    "healthcheck": {
      "type": "object",
      "description": "用于确定容器是否健康的配置选项。",
      "properties": {
        "disable": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "禁用任何容器指定的健康检查。设置为 true 以禁用。"
        },
        "interval": {
          "type": "string",
          "description": "运行检查之间的时间（例如，'1s'，'1m30s'）。默认值：30s。"
        },
        "retries": {
          "type": [
            "number",
            "string"
          ],
          "description": "需要多少次连续失败才能将容器视为不健康。默认值：3。"
        },
        "test": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          ],
          "description": "用于检查容器健康的测试。可以是字符串或列表。第一项是 NONE、CMD 或 CMD-SHELL。如果是 CMD，则执行其余命令。如果是 CMD-SHELL，则在 shell 中运行其余命令。"
        },
        "timeout": {
          "type": "string",
          "description": "允许一次检查运行的最大时间（例如，'1s'，'1m30s'）。默认值：30s。"
        },
        "start_period": {
          "type": "string",
          "description": "容器在开始健康重试倒计时之前的启动周期（例如，'1s'，'1m30s'）。默认值：0s。"
        },
        "start_interval": {
          "type": "string",
          "description": "在启动周期内运行检查之间的时间（例如，'1s'，'1m30s'）。默认值：与 interval 相同。"
        }
      },
      "additionalProperties": false,
      "patternProperties": {
        "^x-": {}
      }
    },
    "development": {
      "type": [
        "object",
        "null"
      ],
      "description": "服务的开发配置，用于开发工作流。",
      "properties": {
        "watch": {
          "type": "array",
          "description": "配置服务的 watch 模式，该模式监视文件更改并响应性地执行操作。",
          "items": {
            "type": "object",
            "required": [
              "path",
              "action"
            ],
            "properties": {
              "ignore": {
                "$ref": "#/definitions/string_or_list",
                "description": "要从监视中排除的模式。"
              },
              "include": {
                "$ref": "#/definitions/string_or_list",
                "description": "要包含在监视中的模式。"
              },
              "path": {
                "type": "string",
                "description": "要监视更改的路径。"
              },
              "action": {
                "type": "string",
                "enum": [
                  "rebuild",
                  "sync",
                  "restart",
                  "sync+restart",
                  "sync+exec"
                ],
                "description": "检测到更改时要采取的操作：重建容器、同步文件、重新启动容器、同步并重新启动，或同步并执行命令。"
              },
              "target": {
                "type": "string",
                "description": "同步操作在容器中的目标路径。"
              },
              "exec": {
                "$ref": "#/definitions/service_hook",
                "description": "检测到更改且 action 为 sync+exec 时要执行的命令。"
              }
            },
            "additionalProperties": false,
            "patternProperties": {
              "^x-": {}
            }
          }
        }
      },
      "additionalProperties": false,
      "patternProperties": {
        "^x-": {}
      }
    },
    "deployment": {
      "type": [
        "object",
        "null"
      ],
      "description": "服务的部署配置。",
      "properties": {
        "mode": {
          "type": "string",
          "description": "服务的部署模式：'replicated'（默认）或 'global'。"
        },
        "endpoint_mode": {
          "type": "string",
          "description": "服务的端点模式：'vip'（默认）或 'dnsrr'。"
        },
        "replicas": {
          "type": [
            "integer",
            "string"
          ],
          "description": "要运行的服务容器副本数。"
        },
        "labels": {
          "$ref": "#/definitions/list_or_dict",
          "description": "要应用于服务的标签。"
        },
        "rollback_config": {
          "type": "object",
          "description": "回滚服务更新的配置。",
          "properties": {
            "parallelism": {
              "type": [
                "integer",
                "string"
              ],
              "description": "一次回滚的容器数量。如果设置为 0，所有容器同时回滚。"
            },
            "delay": {
              "type": "string",
              "description": "每组容器回滚之间等待的时间（例如，'1s'，'1m30s'）。"
            },
            "failure_action": {
              "type": "string",
              "description": "如果回滚失败，要采取的操作：'continue'、'pause'。"
            },
            "monitor": {
              "type": "string",
              "description": "创建后监视每个任务是否有故障的持续时间（例如，'1s'，'1m30s'）。"
            },
            "max_failure_ratio": {
              "type": [
                "number",
                "string"
              ],
              "description": "回滚期间可容忍的故障率。"
            },
            "order": {
              "type": "string",
              "enum": [
                "start-first",
                "stop-first"
              ],
              "description": "回滚期间的操作顺序：'stop-first'（默认）或 'start-first'。"
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        },
        "update_config": {
          "type": "object",
          "description": "更新服务的配置。",
          "properties": {
            "parallelism": {
              "type": [
                "integer",
                "string"
              ],
              "description": "一次更新的容器数量。"
            },
            "delay": {
              "type": "string",
              "description": "更新一组容器之间等待的时间（例如，'1s'，'1m30s'）。"
            },
            "failure_action": {
              "type": "string",
              "description": "如果更新失败，要采取的操作：'continue'、'pause'、'rollback'。"
            },
            "monitor": {
              "type": "string",
              "description": "创建后监视每个更新任务是否有故障的持续时间（例如，'1s'，'1m30s'）。"
            },
            "max_failure_ratio": {
              "type": [
                "number",
                "string"
              ],
              "description": "更新期间可容忍的故障率（0 到 1）。"
            },
            "order": {
              "type": "string",
              "enum": [
                "start-first",
                "stop-first"
              ],
              "description": "更新期间的操作顺序：'stop-first'（默认）或 'start-first'。"
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        },
        "resources": {
          "type": "object",
          "description": "服务的资源限制和预留。",
          "properties": {
            "limits": {
              "type": "object",
              "description": "服务容器的资源限制。",
              "properties": {
                "cpus": {
                  "type": [
                    "number",
                    "string"
                  ],
                  "description": "容器可使用的可用 CPU 资源限制（以核心数计）。"
                },
                "memory": {
                  "type": "string",
                  "description": "容器可分配的内存量限制（例如，'1g'，'1024m'）。"
                },
                "pids": {
                  "type": [
                    "integer",
                    "string"
                  ],
                  "description": "容器可用的最大 PID 数量。"
                }
              },
              "additionalProperties": false,
              "patternProperties": {
                "^x-": {}
              }
            },
            "reservations": {
              "type": "object",
              "description": "服务容器的资源预留。",
              "properties": {
                "cpus": {
                  "type": [
                    "number",
                    "string"
                  ],
                  "description": "容器可使用的可用 CPU 资源预留（以核心数计）。"
                },
                "memory": {
                  "type": "string",
                  "description": "容器可分配的内存量预留（例如，'1g'，'1024m'）。"
                },
                "generic_resources": {
                  "$ref": "#/definitions/generic_resources",
                  "description": "要预留的用户定义资源。"
                },
                "devices": {
                  "$ref": "#/definitions/devices",
                  "description": "容器的设备预留。"
                }
              },
              "additionalProperties": false,
              "patternProperties": {
                "^x-": {}
              }
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        },
        "restart_policy": {
          "type": "object",
          "description": "服务容器的重启策略。",
          "properties": {
            "condition": {
              "type": "string",
              "description": "重启容器的条件：'none'、'on-failure'、'any'。"
            },
            "delay": {
              "type": "string",
              "description": "重启尝试之间的延迟（例如，'1s'，'1m30s'）。"
            },
            "max_attempts": {
              "type": [
                "integer",
                "string"
              ],
              "description": "放弃前的最大重启尝试次数。"
            },
            "window": {
              "type": "string",
              "description": "用于评估重启策略的时间窗口（例如，'1s'，'1m30s'）。"
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        },
        "placement": {
          "type": "object",
          "description": "平台选择物理节点来运行服务容器的约束和偏好。",
          "properties": {
            "constraints": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "服务的放置约束（例如，'node.role==manager'）。"
            },
            "preferences": {
              "type": "array",
              "description": "服务的放置偏好。",
              "items": {
                "type": "object",
                "properties": {
                  "spread": {
                    "type": "string",
                    "description": "将任务均匀地分散到指定节点标签的值上。"
                  }
                },
                "additionalProperties": false,
                "patternProperties": {
                  "^x-": {}
                }
              }
            },
            "max_replicas_per_node": {
              "type": [
                "integer",
                "string"
              ],
              "description": "服务的最大副本数。"
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        }
      },
      "additionalProperties": false,
      "patternProperties": {
        "^x-": {}
      }
    },
    "generic_resources": {
      "type": "array",
      "description": "服务的用户定义资源，允许服务预留专用硬件资源。",
      "items": {
        "type": "object",
        "properties": {
          "discrete_resource_spec": {
            "type": "object",
            "description": "离散（可计数）资源的规范。",
            "properties": {
              "kind": {
                "type": "string",
                "description": "资源类型（例如，'GPU'、'FPGA'、'SSD'）。"
              },
              "value": {
                "type": [
                  "number",
                  "string"
                ],
                "description": "要预留的此类资源的数量。"
              }
            },
            "additionalProperties": false,
            "patternProperties": {
              "^x-": {}
            }
          }
        },
        "additionalProperties": false,
        "patternProperties": {
          "^x-": {}
        }
      }
    },
    "devices": {
      "type": "array",
      "description": "容器的设备预留，允许服务访问特定硬件设备。",
      "items": {
        "type": "object",
        "properties": {
          "capabilities": {
            "$ref": "#/definitions/list_of_strings",
            "description": "设备需要具备的功能列表（例如，'gpu'、'compute'、'utility'）。"
          },
          "count": {
            "type": [
              "string",
              "integer"
            ],
            "description": "要预留的此类设备的数量。"
          },
          "device_ids": {
            "$ref": "#/definitions/list_of_strings",
            "description": "要预留的特定设备 ID 列表。"
          },
          "driver": {
            "type": "string",
            "description": "要使用的设备驱动程序（例如，'nvidia'）。"
          },
          "options": {
            "$ref": "#/definitions/list_or_dict",
            "description": "设备特定的驱动程序选项。"
          }
        },
        "additionalProperties": false,
        "patternProperties": {
          "^x-": {}
        },
        "required": [
          "capabilities"
        ]
      }
    },
    "gpus": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "all"
          ],
          "description": "使用所有可用的 GPU。"
        },
        {
          "type": "array",
          "description": "要使用的特定 GPU 设备列表。",
          "items": {
            "type": "object",
            "properties": {
              "capabilities": {
                "$ref": "#/definitions/list_of_strings",
                "description": "GPU 需要具备的功能列表（例如，'compute'、'utility'）。"
              },
              "count": {
                "type": [
                  "string",
                  "integer"
                ],
                "description": "要使用的 GPU 数量。"
              },
              "device_ids": {
                "$ref": "#/definitions/list_of_strings",
                "description": "要使用的特定 GPU 设备 ID 列表。"
              },
              "driver": {
                "type": "string",
                "description": "要使用的 GPU 驱动程序（例如，'nvidia'）。"
              },
              "options": {
                "$ref": "#/definitions/list_or_dict",
                "description": "GPU 特定的驱动程序选项。"
              }
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        }
      ]
    },
    "include": {
      "description": "要包含的 Compose 应用程序或子项目。",
      "oneOf": [
        {
          "type": "string"
        },
        {
          "type": "object",
          "properties": {
            "path": {
              "$ref": "#/definitions/string_or_list",
              "description": "要包含的 Compose 应用程序或子项目文件的路径。"
            },
            "env_file": {
              "$ref": "#/definitions/string_or_list",
              "description": "环境变量文件的路径，用于在解析 Compose 文件时定义变量的默认值。"
            },
            "project_directory": {
              "type": "string",
              "description": "用于解析 Compose 文件中设置的相对路径的路径。"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "network": {
      "type": [
        "object",
        "null"
      ],
      "description": "Compose 应用程序的网络配置。",
      "properties": {
        "name": {
          "type": "string",
          "description": "此网络的自定义名称。"
        },
        "driver": {
          "type": "string",
          "description": "指定此网络应使用的驱动程序。默认值为 'bridge'。"
        },
        "driver_opts": {
          "type": "object",
          "description": "指定以键/值对形式定义的驱动程序特定选项。",
          "patternProperties": {
            "^.+$": {
              "type": [
                "string",
                "number"
              ]
            }
          }
        },
        "ipam": {
          "type": "object",
          "description": "此网络的自定义 IP 地址管理配置。",
          "properties": {
            "driver": {
              "type": "string",
              "description": "自定义 IPAM 驱动程序，而不是默认值。"
            },
            "config": {
              "type": "array",
              "description": "IPAM 配置块列表。",
              "items": {
                "type": "object",
                "properties": {
                  "subnet": {
                    "type": "string",
                    "description": "表示网络段的 CIDR 格式的子网。"
                  },
                  "ip_range": {
                    "type": "string",
                    "description": "用于分配容器 IP 的 IP 范围。"
                  },
                  "gateway": {
                    "type": "string",
                    "description": "子网的 IPv4 或 IPv6 网关。"
                  },
                  "aux_addresses": {
                    "type": "object",
                    "description": "网络驱动程序使用的辅助 IPv4 或 IPv6 地址。",
                    "additionalProperties": false,
                    "patternProperties": {
                      "^.+$": {
                        "type": "string"
                      }
                    }
                  }
                },
                "additionalProperties": false,
                "patternProperties": {
                  "^x-": {}
                }
              }
            },
            "options": {
              "type": "object",
              "description": "IPAM 驱动程序的驱动程序特定选项。",
              "additionalProperties": false,
              "patternProperties": {
                "^.+$": {
                  "type": "string"
                }
              }
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        },
        "external": {
          "type": [
            "boolean",
            "string",
            "object"
          ],
          "description": "指定此网络已存在并是在 Compose 外部创建的。",
          "properties": {
            "name": {
              "deprecated": true,
              "type": "string",
              "description": "指定外部网络的名称。已弃用：请改用 'name' 属性。"
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        },
        "internal": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "创建外部隔离的网络。"
        },
        "enable_ipv4": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "启用 IPv4 网络。"
        },
        "enable_ipv6": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "启用 IPv6 网络。"
        },
        "attachable": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "如果为 true，则独立容器可以附加到此网络。"
        },
        "labels": {
          "$ref": "#/definitions/list_or_dict",
          "description": "使用标签向网络添加元数据。"
        }
      },
      "additionalProperties": false,
      "patternProperties": {
        "^x-": {}
      }
    },
    "volume": {
      "type": [
        "object",
        "null"
      ],
      "description": "Compose 应用程序的卷配置。",
      "properties": {
        "name": {
          "type": "string",
          "description": "此卷的自定义名称。"
        },
        "driver": {
          "type": "string",
          "description": "指定此卷应使用的卷驱动程序。"
        },
        "driver_opts": {
          "type": "object",
          "description": "指定驱动程序特定选项。",
          "patternProperties": {
            "^.+$": {
              "type": [
                "string",
                "number"
              ]
            }
          }
        },
        "external": {
          "type": [
            "boolean",
            "string",
            "object"
          ],
          "description": "指定此卷已存在并是在 Compose 外部创建的。",
          "properties": {
            "name": {
              "deprecated": true,
              "type": "string",
              "description": "指定外部卷的名称。已弃用：请改用 'name' 属性。"
            }
          },
          "additionalProperties": false,
          "patternProperties": {
            "^x-": {}
          }
        },
        "labels": {
          "$ref": "#/definitions/list_or_dict",
          "description": "使用标签向卷添加元数据。"
        }
      },
      "additionalProperties": false,
      "patternProperties": {
        "^x-": {}
      }
    },
    "secret": {
      "type": "object",
      "description": "Compose 应用程序的密钥配置。",
      "properties": {
        "name": {
          "type": "string",
          "description": "此密钥的自定义名称。"
        },
        "environment": {
          "type": "string",
          "description": "从中获取密钥值的环境变量的名称。"
        },
        "file": {
          "type": "string",
          "description": "包含密钥值的文件路径。"
        },
        "external": {
          "type": [
            "boolean",
            "string",
            "object"
          ],
          "description": "指定此密钥已存在并是在 Compose 外部创建的。",
          "properties": {
            "name": {
              "type": "string",
              "description": "指定外部密钥的名称。"
            }
          }
        },
        "labels": {
          "$ref": "#/definitions/list_or_dict",
          "description": "使用标签向密钥添加元数据。"
        },
        "driver": {
          "type": "string",
          "description": "指定此密钥应使用的密钥驱动程序。"
        },
        "driver_opts": {
          "type": "object",
          "description": "指定驱动程序特定选项。",
          "patternProperties": {
            "^.+$": {
              "type": [
                "string",
                "number"
              ]
            }
          }
        },
        "template_driver": {
          "type": "string",
          "description": "用于对密钥值进行模板化的驱动程序。"
        }
      },
      "additionalProperties": false,
      "patternProperties": {
        "^x-": {}
      }
    },
    "config": {
      "type": "object",
      "description": "Compose 应用程序的配置。",
      "properties": {
        "name": {
          "type": "string",
          "description": "此配置的自定义名称。"
        },
        "content": {
          "type": "string",
          "description": "配置的内联内容。"
        },
        "environment": {
          "type": "string",
          "description": "从中获取配置值的环境变量的名称。"
        },
        "file": {
          "type": "string",
          "description": "包含配置值的文件路径。"
        },
        "external": {
          "type": [
            "boolean",
            "string",
            "object"
          ],
          "description": "指定此配置已存在并是在 Compose 外部创建的。",
          "properties": {
            "name": {
              "deprecated": true,
              "type": "string",
              "description": "指定外部配置的名称。已弃用：请改用 'name' 属性。"
            }
          }
        },
        "labels": {
          "$ref": "#/definitions/list_or_dict",
          "description": "使用标签向配置添加元数据。"
        },
        "template_driver": {
          "type": "string",
          "description": "用于对配置值进行模板化的驱动程序。"
        }
      },
      "additionalProperties": false,
      "patternProperties": {
        "^x-": {}
      }
    },
    "model": {
      "type": "object",
      "description": "Compose 应用程序的语言模型。",
      "properties": {
        "name": {
          "type": "string",
          "description": "此模型的自定义名称。"
        },
        "model": {
          "type": "string",
          "description": "要运行的语言模型。"
        },
        "context_size": {
          "type": "integer"
        },
        "runtime_flags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "要传递给推理引擎的原始运行时标志。"
        }
      },
      "required": [
        "model"
      ],
      "additionalProperties": false,
      "patternProperties": {
        "^x-": {}
      }
    },
    "command": {
      "oneOf": [
        {
          "type": "null",
          "description": "未指定命令，使用容器的默认命令。"
        },
        {
          "type": "string",
          "description": "作为字符串的命令，将在 shell 中执行（例如，'/bin/sh -c'）。"
        },
        {
          "type": "array",
          "description": "作为字符串数组的命令，将直接执行而不使用 shell。",
          "items": {
            "type": "string",
            "description": "命令的一部分（可执行文件或参数）。"
          }
        }
      ],
      "description": "在容器中运行的命令，可以指定为字符串（shell 形式）或数组（exec 形式）。"
    },
    "service_hook": {
      "type": "object",
      "description": "服务生命周期钩子的配置，是在容器生命周期的特定点执行的命令。",
      "properties": {
        "command": {
          "$ref": "#/definitions/command",
          "description": "作为钩子一部分执行的命令。"
        },
        "user": {
          "type": "string",
          "description": "运行命令的用户。"
        },
        "privileged": {
          "type": [
            "boolean",
            "string"
          ],
          "description": "是否以扩展特权运行命令。"
        },
        "working_dir": {
          "type": "string",
          "description": "命令的工作目录。"
        },
        "environment": {
          "$ref": "#/definitions/list_or_dict",
          "description": "命令的环境变量。"
        }
      },
      "additionalProperties": false,
      "patternProperties": {
        "^x-": {}
      },
      "required": [
        "command"
      ]
    },
    "env_file": {
      "oneOf": [
        {
          "type": "string",
          "description": "包含环境变量的文件的路径。"
        },
        {
          "type": "array",
          "description": "包含环境变量的文件的路径列表。",
          "items": {
            "oneOf": [
              {
                "type": "string",
                "description": "包含环境变量的文件的路径。"
              },
              {
                "type": "object",
                "description": "环境变量文件的详细配置。",
                "additionalProperties": false,
                "properties": {
                  "path": {
                    "type": "string",
                    "description": "环境变量文件的路径。"
                  },
                  "format": {
                    "type": "string",
                    "description": "format 属性允许您使用备用文件格式来处理 env_file。如果未设置，则根据 Compose 规则解析 env_file。"
                  },
                  "required": {
                    "type": [
                      "boolean",
                      "string"
                    ],
                    "default": true,
                    "description": "文件是否为必需。如果为 true 且文件不存在，将引发错误。"
                  }
                },
                "required": [
                  "path"
                ]
              }
            ]
          }
        }
      ]
    },
    "label_file": {
      "oneOf": [
        {
          "type": "string",
          "description": "包含 Docker 标签的文件的路径。"
        },
        {
          "type": "array",
          "description": "包含 Docker 标签的文件的路径列表。",
          "items": {
            "type": "string",
            "description": "包含 Docker 标签的文件的路径。"
          }
        }
      ]
    },
    "string_or_list": {
      "oneOf": [
        {
          "type": "string",
          "description": "单个字符串值。"
        },
        {
          "$ref": "#/definitions/list_of_strings",
          "description": "字符串值列表。"
        }
      ],
      "description": "单个字符串或字符串列表。"
    },
    "list_of_strings": {
      "type": "array",
      "description": "唯一的字符串值列表。",
      "items": {
        "type": "string",
        "description": "列表中的字符串值。"
      },
      "uniqueItems": true
    },
    "list_or_dict": {
      "oneOf": [
        {
          "type": "object",
          "description": "将键映射到值的字典。",
          "patternProperties": {
            ".+": {
              "type": [
                "string",
                "number",
                "boolean",
                "null"
              ],
              "description": "键的值，可以是字符串、数字、布尔值或 null。"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "array",
          "description": "唯一的字符串值列表。",
          "items": {
            "type": "string",
            "description": "列表中的字符串值。"
          },
          "uniqueItems": true
        }
      ],
      "description": "将键映射到值的字典或字符串列表。"
    },
    "extra_hosts": {
      "oneOf": [
        {
          "type": "object",
          "description": "将主机名映射到 IP 地址的列表。",
          "patternProperties": {
            ".+": {
              "oneOf": [
                {
                  "type": "string",
                  "description": "主机名的 IP 地址。"
                },
                {
                  "type": "array",
                  "description": "主机名的 IP 地址列表。",
                  "items": {
                    "type": "string",
                    "description": "主机名的 IP 地址。"
                  },
                  "uniqueItems": false
                }
              ]
            }
          },
          "additionalProperties": false
        },
        {
          "type": "array",
          "description": "“hostname:IP”格式的主机：IP 映射列表。",
          "items": {
            "type": "string",
            "description": "“hostname:IP”格式的主机：IP 映射。"
          },
          "uniqueItems": true
        }
      ],
      "description": "要在容器的 /etc/hosts 文件中定义的额外主机名。"
    },
    "blkio_limit": {
      "type": "object",
      "description": "特定设备的块 IO 限制。",
      "properties": {
        "path": {
          "type": "string",
          "description": "设备路径（例如，'/dev/sda'）。"
        },
        "rate": {
          "type": [
            "integer",
            "string"
          ],
          "description": "速率限制，以字节/秒或 IO 操作/秒为单位。"
        }
      },
      "additionalProperties": false
    },
    "blkio_weight": {
      "type": "object",
      "description": "特定设备的块 IO 权重。",
      "properties": {
        "path": {
          "type": "string",
          "description": "设备路径（例如，'/dev/sda'）。"
        },
        "weight": {
          "type": [
            "integer",
            "string"
          ],
          "description": "设备的相对权重，介于 10 到 1000 之间。"
        }
      },
      "additionalProperties": false
    },
    "service_config_or_secret": {
      "type": "array",
      "description": "服务配置或密钥的配置，定义它们在容器中的挂载方式。",
      "items": {
        "oneOf": [
          {
            "type": "string",
            "description": "要授予访问权限的配置或密钥的名称。"
          },
          {
            "type": "object",
            "description": "配置或密钥的详细配置。",
            "properties": {
              "source": {
                "type": "string",
                "description": "在顶级 configs 或 secrets 部分中定义的配置或密钥的名称。"
              },
              "target": {
                "type": "string",
                "description": "配置或密钥将在容器中挂载到的路径。对于配置，默认为 /<source>；对于密钥，默认为 /run/secrets/<source>。"
              },
              "uid": {
                "type": "string",
                "description": "容器中文件的 UID。默认值为 0（root）。"
              },
              "gid": {
                "type": "string",
                "description": "容器中文件的 GID。默认值为 0（root）。"
              },
              "mode": {
                "type": [
                  "number",
                  "string"
                ],
                "description": "容器内的文件权限模式（八进制）。对于配置，默认值为 0444；对于密钥，默认值为 0400。"
              }
            },
            "additionalProperties": false,
            "patternProperties": {
              "^x-": {}
            }
          }
        ]
      }
    },
    "ulimits": {
      "type": "object",
      "description": "容器 ulimit 选项，控制容器内进程的资源限制。",
      "patternProperties": {
        "^[a-z]+$": {
          "oneOf": [
            {
              "type": [
                "integer",
                "string"
              ],
              "description": "软限制和硬限制的单一值。"
            },
            {
              "type": "object",
              "description": "单独的软限制和硬限制。",
              "properties": {
                "hard": {
                  "type": [
                    "integer",
                    "string"
                  ],
                  "description": "ulimit 类型的硬限制。这是允许的最大值。"
                },
                "soft": {
                  "type": [
                    "integer",
                    "string"
                  ],
                  "description": "ulimit 类型的软限制。这是实际强制执行的值。"
                }
              },
              "required": [
                "soft",
                "hard"
              ],
              "additionalProperties": false,
              "patternProperties": {
                "^x-": {}
              }
            }
          ]
        }
      }
    }
  }
}